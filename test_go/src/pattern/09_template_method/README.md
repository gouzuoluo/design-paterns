# 模板方法模式
模板方法定义了一个算法的步骤，并允许子类为一个或多个步骤提供实现。

## 定义模板方法

>模板方法模式：在一个方法中定义一个算法的骨架，而将一些步骤延长到子类中。模板方法使得子类可以在
不改变算法结构的情况下，重新定义算法中的某些步骤。

* 这个模式是用来创建一个算法的模板。
* 模板就是一个方法，更具体来说，这个方法定义成一组步骤。必须由子类负责实现的步骤，就使用抽象方法，由
子类来负责实现。如果步骤是可选的，就使用钩子（hook）,子类就可以选择性的实现这个步骤。

PS：当你写模板方法的时候，如果将步骤切割得很细，子类就会实现大量的的抽象方法。如果步骤太少，会
比较没有弹性，所以要这种考虑。

## 钩子(hook)

>钩子(hook)是一种被声明在抽象类中的方法，但只有空的或者默认的实现。钩子的存在，可以让子类有能力
对算法的不同点进行挂钩，要不要挂钩，由子类自习决定。

钩子的用途：
* 钩子可以让子类实现算法中的可选部分。
* 是让子类能够有机会对模板方法中某些即将发生的（或刚刚发生的）步骤做出反应。

PS：当你的子类“必须”提供算法中某个方法或步骤的实现时，就使用抽象方法。如果算法的这个部分是
可选的，就用钩子。


## 好莱坞原则

设计原则8：别调用（打电话给）我们，我们会调用（打电话给）你。

说明：

* 在好莱坞原则之下，我们允许低层组件将自己挂钩到系统上，但是高层组件会决定什么时候和怎样使用这些
低层组件。换句话说，高层组件对待低层组件的方法是“别调用我们，我们会调用你。

* 当我们设计模板方法模式时，我们告诉子类，“不要调用我们，我们会调用你”

* 依赖倒置原则教我们尽量避免使用具体类，而多使用抽象。而好莱坞原则是在创建框架或组件上的一种
技巧，好让低层组件能够被挂钩进计算中，而且又不会让高层组件依赖低层组件。两者的目标都是在于解
耦，但是依赖倒置原则更加注重如何在设计中避免依赖。好莱坞原则教我们一个技巧，创建一个有弹性的
设计，允许低层结构能够互相操作，而又防止其他类太过依赖他们。

* 低层组件有时需要调用高层组件中的方法，事实上，低层组件在结束时，常常会调用从超类中继承来
的方法，我们要做的是，避免让高层和低层组件之间有明显的环状依赖。


## 模板方法用途及与策略模式的比较

模板方法模式是一种很常见的模式，因为对创建框架来说，这个模式简直棒极了。由框架控制如何和
做事情，而由你（使用框架的人）指定框架算法中每个步骤的细节。

* 用模板方法排序（如：go语言中的sort就是使用了模板方法来排序）。

* 策略模式：定义一个算法家族，并让这些算法可以互换。因为每个算法都被封装起来了，所以客户可以
轻易地使用不同的算法。使用对象组合来实现。

* 模板方法：定义一个算法的大纲，而由子类定义其中某些步骤的内容。这么一来，在算法中的个别步骤
的内容可以有不同的实现细节，但是算法的结构依然维持不变。使用继承来实现。

## 要点

* “模板方法”定义了算法的步骤，把这些步骤的实现延长到子类。

* 模板方法模式为我们提供了一种代码复用的重要技巧。

* 模板方法的抽象类可以定义具体方法、抽象方法和钩子。

* 抽象方法由子类实现。

* 钩子是一种方法，它在抽象类中不做事，或者只做默认的事情，子类可以选择要不要覆盖它。

* 为了防止子类改变模板方法中的算法，可以将模板方法声明为final。

* 好莱坞原则告诉我们，将决策权放在高层模板中，以便决定如何以及何时调用低层模块。

* 你将真实世界代码中看到模板方法模式的许多变体，不要期待他们全都是一眼就可以被你认出来。

* 策略模式和模板方法模式都封装算法，一个用组合，一个用继承。

* 工厂方法是模板方法的一种特殊版本，只是它由子类决定的方法步骤是用来创建对象的。